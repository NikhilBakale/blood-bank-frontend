<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blood Inventory Management - ER Diagram (Clean Design)</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background-color: #f5f5f5;
        }
        h1 {
            text-align: center;
            color: #333;
        }
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
        }
        .diagram-container {
            background-color: white;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            overflow-x: auto;
        }
        svg {
            display: block;
            margin: 0 auto;
        }
        .entity {
            fill: #e3f2fd;
            stroke: #1976d2;
            stroke-width: 2;
        }
        .entity-text {
            font-size: 14px;
            font-weight: bold;
            text-anchor: middle;
            fill: #1976d2;
        }
        .attribute {
            fill: #fff9c4;
            stroke: #f57c00;
            stroke-width: 1.5;
        }
        .attribute-text {
            font-size: 11px;
            text-anchor: middle;
            fill: #333;
        }
        .multivalued-attribute {
            fill: #fff9c4;
            stroke: #f57c00;
            stroke-width: 1.5;
        }
        .multivalued-inner {
            fill: none;
            stroke: #f57c00;
            stroke-width: 1.5;
        }
        .key-attribute {
            text-decoration: underline;
            font-weight: bold;
        }
        .relationship {
            fill: #ffccbc;
            stroke: #d84315;
            stroke-width: 2;
        }
        .relationship-text {
            font-size: 12px;
            font-weight: bold;
            text-anchor: middle;
            fill: #d84315;
        }
        .line {
            stroke: #333;
            stroke-width: 2;
            fill: none;
        }
        .cardinality {
            font-size: 12px;
            font-weight: bold;
            fill: #d84315;
        }
        .legend {
            margin-top: 30px;
            padding: 20px;
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .legend h3 {
            margin-top: 0;
            color: #333;
        }
        .legend-item {
            margin: 10px 0;
            display: flex;
            align-items: center;
        }
        .legend-symbol {
            width: 60px;
            height: 30px;
            margin-right: 10px;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <h1>Blood Inventory Management System - ER Diagram</h1>
    <p class="subtitle">Clean Design - Relationships as Diamonds, Multi-valued Attributes</p>
    
    <div class="diagram-container">
        <svg width="1600" height="1600" viewBox="0 0 1600 1600">
            
            <!-- REQUESTERS ENTITY -->
            <rect x="100" y="100" width="180" height="60" class="entity"/>
            <text x="190" y="135" class="entity-text">REQUESTERS</text>
            
            <!-- Requesters Attributes (minimal) -->
            <ellipse cx="100" cy="50" rx="60" ry="25" class="attribute"/>
            <text x="100" y="55" class="attribute-text key-attribute">requester_id</text>
            
            <ellipse cx="220" cy="40" rx="35" ry="25" class="attribute"/>
            <text x="220" y="45" class="attribute-text">email</text>
            
            <ellipse cx="310" cy="90" rx="50" ry="25" class="attribute"/>
            <text x="310" y="95" class="attribute-text">full_name</text>
            
            <ellipse cx="320" cy="150" rx="35" ry="25" class="attribute"/>
            <text x="320" y="155" class="attribute-text">phone</text>
            
            <!-- Lines from Requesters to Attributes -->
            <line x1="150" y1="100" x2="135" y2="68" class="line"/>
            <line x1="220" y1="100" x2="215" y2="63" class="line"/>
            <line x1="270" y1="115" x2="285" y2="105" class="line"/>
            <line x1="270" y1="145" x2="295" y2="152" class="line"/>

            <!-- HOSPITALS ENTITY -->
            <rect x="900" y="100" width="180" height="60" class="entity"/>
            <text x="990" y="135" class="entity-text">HOSPITALS</text>
            
            <!-- Hospitals Attributes (minimal) -->
            <ellipse cx="880" cy="50" rx="60" ry="25" class="attribute"/>
            <text x="880" y="55" class="attribute-text key-attribute">hospital_id</text>
            
            <ellipse cx="1030" cy="40" rx="40" ry="25" class="attribute"/>
            <text x="1030" y="45" class="attribute-text">name</text>
            
            <ellipse cx="1130" cy="90" rx="45" ry="25" class="attribute"/>
            <text x="1130" y="95" class="attribute-text">address</text>
            
            <ellipse cx="1140" cy="150" rx="30" ry="25" class="attribute"/>
            <text x="1140" y="155" class="attribute-text">phone</text>
            
            <ellipse cx="1080" cy="200" rx="35" ry="25" class="attribute"/>
            <text x="1080" y="205" class="attribute-text">email</text>
            
            <!-- Lines from Hospitals to Attributes -->
            <line x1="940" y1="100" x2="910" y2="68" class="line"/>
            <line x1="1020" y1="100" x2="1025" y2="63" class="line"/>
            <line x1="1070" y1="110" x2="1100" y2="100" class="line"/>
            <line x1="1070" y1="150" x2="1115" y2="155" class="line"/>
            <line x1="1040" y1="160" x2="1060" y2="185" class="line"/>

            <!-- REQUESTS Relationship (Diamond with attributes) -->
            <polygon points="540,300 640,400 540,500 440,400" class="relationship"/>
            <text x="540" y="405" class="relationship-text">REQUESTS</text>
            
            <!-- Relationship Attributes -->
            <ellipse cx="380" cy="350" rx="65" ry="25" class="attribute"/>
            <text x="380" y="355" class="attribute-text">patient_name</text>
            
            <ellipse cx="330" cy="420" rx="60" ry="25" class="attribute"/>
            <text x="330" y="425" class="attribute-text">patient_age</text>
            
            <ellipse cx="360" cy="490" rx="55" ry="25" class="attribute"/>
            <text x="360" y="495" class="attribute-text">blood_type</text>
            
            <ellipse cx="460" cy="560" rx="50" ry="25" class="attribute"/>
            <text x="460" y="565" class="attribute-text">urgency</text>
            
            <ellipse cx="560" cy="580" rx="60" ry="25" class="attribute"/>
            <text x="560" y="585" class="attribute-text">units_needed</text>
            
            <ellipse cx="680" cy="560" rx="75" ry="25" class="attribute"/>
            <text x="680" y="565" class="attribute-text">contact_number</text>
            
            <ellipse cx="740" cy="480" rx="70" ry="25" class="attribute"/>
            <text x="740" y="485" class="attribute-text">medical_notes</text>
            
            <ellipse cx="730" cy="400" rx="40" ry="25" class="attribute"/>
            <text x="730" y="405" class="attribute-text">status</text>
            
            <!-- Multi-valued Attribute: selected_hospitals (double oval) -->
            <ellipse cx="720" cy="330" rx="75" ry="30" class="multivalued-attribute"/>
            <ellipse cx="720" cy="330" rx="68" ry="23" class="multivalued-inner"/>
            <text x="720" y="335" class="attribute-text">selected_hospitals</text>
            
            <!-- Lines from Requests Relationship to Attributes -->
            <line x1="480" y1="370" x2="430" y2="360" class="line"/>
            <line x1="460" y1="410" x2="380" y2="425" class="line"/>
            <line x1="470" y1="460" x2="405" y2="485" class="line"/>
            <line x1="500" y1="500" x2="490" y2="550" class="line"/>
            <line x1="540" y1="510" x2="560" y2="560" class="line"/>
            <line x1="590" y1="490" x2="640" y2="550" class="line"/>
            <line x1="620" y1="460" x2="690" y2="490" class="line"/>
            <line x1="630" y1="415" x2="700" y2="410" class="line"/>
            <line x1="610" y1="360" x2="660" y2="340" class="line"/>

            <!-- Lines: Requester to Requests Relationship -->
            <line x1="280" y1="140" x2="470" y2="370" class="line"/>
            <text x="350" y="240" class="cardinality">1</text>
            
            <!-- Lines: Requests Relationship to Hospital -->
            <line x1="610" y1="370" x2="900" y2="140" class="line"/>
            <text x="780" y="240" class="cardinality">N</text>

            <!-- DONORS ENTITY -->
            <rect x="1200" y="400" width="180" height="60" class="entity"/>
            <text x="1290" y="435" class="entity-text">DONORS</text>
            
            <!-- Donors Attributes (essential only) -->
            <ellipse cx="1180" cy="340" rx="50" ry="25" class="attribute"/>
            <text x="1180" y="345" class="attribute-text key-attribute">donor_id</text>
            
            <ellipse cx="1300" cy="320" rx="55" ry="25" class="attribute"/>
            <text x="1300" y="325" class="attribute-text">first_name</text>
            
            <ellipse cx="1410" cy="340" rx="55" ry="25" class="attribute"/>
            <text x="1410" y="345" class="attribute-text">last_name</text>
            
            <ellipse cx="1450" cy="410" rx="65" ry="25" class="attribute"/>
            <text x="1450" y="415" class="attribute-text">date_of_birth</text>
            
            <ellipse cx="1450" cy="470" rx="55" ry="25" class="attribute"/>
            <text x="1450" y="475" class="attribute-text">blood_type</text>
            
            <ellipse cx="1410" cy="530" rx="35" ry="25" class="attribute"/>
            <text x="1410" y="535" class="attribute-text">phone</text>
            
            <ellipse cx="1300" cy="550" rx="35" ry="25" class="attribute"/>
            <text x="1300" y="555" class="attribute-text">email</text>
            
            <ellipse cx="1180" cy="530" rx="45" ry="25" class="attribute"/>
            <text x="1180" y="535" class="attribute-text">address</text>
            
            <!-- Lines from Donors to Attributes -->
            <line x1="1240" y1="400" x2="1210" y2="358" class="line"/>
            <line x1="1280" y1="400" x2="1280" y2="343" class="line"/>
            <line x1="1330" y1="400" x2="1385" y2="355" class="line"/>
            <line x1="1370" y1="420" x2="1405" y2="420" class="line"/>
            <line x1="1370" y1="445" x2="1410" y2="458" class="line"/>
            <line x1="1350" y1="460" x2="1385" y2="518" class="line"/>
            <line x1="1310" y1="460" x2="1310" y2="528" class="line"/>
            <line x1="1240" y1="460" x2="1210" y2="513" class="line"/>

            <!-- DONATIONS ENTITY -->
            <rect x="1200" y="800" width="180" height="60" class="entity"/>
            <text x="1290" y="835" class="entity-text">DONATIONS</text>
            
            <!-- Donations Attributes (essential) -->
            <ellipse cx="1180" cy="740" rx="50" ry="25" class="attribute"/>
            <text x="1180" y="745" class="attribute-text key-attribute">blood_id</text>
            
            <ellipse cx="1300" cy="720" rx="55" ry="25" class="attribute"/>
            <text x="1300" y="725" class="attribute-text">blood_type</text>
            
            <ellipse cx="1410" cy="740" rx="50" ry="25" class="attribute"/>
            <text x="1410" y="745" class="attribute-text">rh_factor</text>
            
            <ellipse cx="1470" cy="810" rx="75" ry="25" class="attribute"/>
            <text x="1470" y="815" class="attribute-text">component_type</text>
            
            <ellipse cx="1470" cy="870" rx="55" ry="25" class="attribute"/>
            <text x="1470" y="875" class="attribute-text">volume_ml</text>
            
            <ellipse cx="1420" cy="930" rx="75" ry="25" class="attribute"/>
            <text x="1420" y="935" class="attribute-text">collection_date</text>
            
            <ellipse cx="1300" cy="960" rx="60" ry="25" class="attribute"/>
            <text x="1300" y="965" class="attribute-text">expiry_date</text>
            
            <ellipse cx="1180" cy="940" rx="40" ry="25" class="attribute"/>
            <text x="1180" y="945" class="attribute-text">status</text>
            
            <ellipse cx="1100" cy="870" rx="80" ry="25" class="attribute"/>
            <text x="1100" y="875" class="attribute-text">storage_location</text>
            
            <!-- Lines from Donations to Attributes -->
            <line x1="1240" y1="800" x2="1205" y2="758" class="line"/>
            <line x1="1280" y1="800" x2="1285" y2="743" class="line"/>
            <line x1="1340" y1="800" x2="1385" y2="755" class="line"/>
            <line x1="1370" y1="820" x2="1420" y2="820" class="line"/>
            <line x1="1370" y1="845" x2="1425" y2="860" class="line"/>
            <line x1="1355" y1="860" x2="1385" y2="915" class="line"/>
            <line x1="1310" y1="860" x2="1310" y2="938" class="line"/>
            <line x1="1240" y1="860" x2="1200" y2="920" class="line"/>
            <line x1="1210" y1="840" x2="1160" y2="860" class="line"/>

            <!-- TRANSFERS ENTITY -->
            <rect x="500" y="800" width="180" height="60" class="entity"/>
            <text x="590" y="835" class="entity-text">TRANSFERS</text>
            
            <!-- Transfers Attributes (essential) -->
            <ellipse cx="480" cy="740" rx="55" ry="25" class="attribute"/>
            <text x="480" y="745" class="attribute-text key-attribute">transfer_id</text>
            
            <ellipse cx="600" cy="720" rx="50" ry="25" class="attribute"/>
            <text x="600" y="725" class="attribute-text">blood_id</text>
            
            <ellipse cx="710" cy="750" rx="55" ry="25" class="attribute"/>
            <text x="710" y="755" class="attribute-text">blood_type</text>
            
            <ellipse cx="760" cy="820" rx="55" ry="25" class="attribute"/>
            <text x="760" y="825" class="attribute-text">volume_ml</text>
            
            <ellipse cx="750" cy="890" rx="80" ry="25" class="attribute"/>
            <text x="750" y="895" class="attribute-text">recipient_name</text>
            
            <ellipse cx="680" cy="940" rx="70" ry="25" class="attribute"/>
            <text x="680" y="945" class="attribute-text">transfer_date</text>
            
            <ellipse cx="560" cy="960" rx="35" ry="25" class="attribute"/>
            <text x="560" y="965" class="attribute-text">notes</text>
            
            <ellipse cx="450" cy="930" rx="50" ry="25" class="attribute"/>
            <text x="450" y="935" class="attribute-text">donor_id</text>
            
            <!-- Lines from Transfers to Attributes -->
            <line x1="530" y1="800" x2="505" y2="758" class="line"/>
            <line x1="580" y1="800" x2="595" y2="743" class="line"/>
            <line x1="650" y1="810" x2="680" y2="765" class="line"/>
            <line x1="670" y1="830" x2="720" y2="830" class="line"/>
            <line x1="670" y1="850" x2="710" y2="880" class="line"/>
            <line x1="640" y1="860" x2="655" y2="925" class="line"/>
            <line x1="580" y1="860" x2="575" y2="938" class="line"/>
            <line x1="520" y1="860" x2="480" y2="915" class="line"/>

            <!-- MANAGES Relationship (Hospital to Donors) -->
            <polygon points="1090,250 1150,310 1090,370 1030,310" class="relationship"/>
            <text x="1090" y="315" class="relationship-text">Manages</text>
            
            <line x1="1080" y1="145" x2="1075" y2="265" class="line"/>
            <text x="1095" y="200" class="cardinality">1</text>
            
            <line x1="1105" y1="355" x2="1200" y2="420" class="line"/>
            <text x="1180" y="400" class="cardinality">N</text>

            <!-- DONATES Relationship (Donors to Donations) -->
            <polygon points="1290,650 1350,710 1290,770 1230,710" class="relationship"/>
            <text x="1290" y="715" class="relationship-text">Donates</text>
            
            <line x1="1290" y1="460" x2="1290" y2="665" class="line"/>
            <text x="1270" y="550" class="cardinality">1</text>
            
            <line x1="1290" y1="755" x2="1290" y2="800" class="line"/>
            <text x="1270" y="780" class="cardinality">N</text>

            <!-- STORES Relationship (Hospital to Donations) -->
            <polygon points="1090,650 1150,710 1090,770 1030,710" class="relationship"/>
            <text x="1090" y="715" class="relationship-text">Stores</text>
            
            <line x1="1030" y1="160" x2="1055" y2="665" class="line"/>
            <text x="1040" y="400" class="cardinality">1</text>
            
            <line x1="1115" y1="755" x2="1200" y2="820" class="line"/>
            <text x="1180" y="800" class="cardinality">N</text>

            <!-- FULFILLS Relationship (Requests to Transfers) -->
            <polygon points="540,650 600,710 540,770 480,710" class="relationship"/>
            <text x="540" y="715" class="relationship-text">Fulfills</text>
            
            <line x1="540" y1="500" x2="540" y2="665" class="line"/>
            <text x="520" y="580" class="cardinality">1</text>
            
            <line x1="560" y1="755" x2="580" y2="800" class="line"/>
            <text x="550" y="780" class="cardinality">N</text>

            <!-- PROCESSES Relationship (Hospital to Transfers) -->
            <polygon points="800,650 860,710 800,770 740,710" class="relationship"/>
            <text x="800" y="715" class="relationship-text">Processes</text>
            
            <line x1="950" y1="160" x2="825" y2="665" class="line"/>
            <text x="890" y="400" class="cardinality">1</text>
            
            <line x1="775" y1="755" x2="670" y2="800" class="line"/>
            <text x="720" y="780" class="cardinality">N</text>

        </svg>
    </div>
    
    <div class="legend">
        <h3>Legend</h3>
        <div class="legend-item">
            <div class="legend-symbol" style="background: #e3f2fd; border: 2px solid #1976d2;"></div>
            <span><strong>Rectangles</strong> - Entities (REQUESTERS, HOSPITALS, DONORS, DONATIONS, TRANSFERS)</span>
        </div>
        <div class="legend-item">
            <div class="legend-symbol" style="background: #ffccbc; border: 2px solid #d84315; transform: rotate(45deg);"></div>
            <span><strong>Diamonds</strong> - Relationships (REQUESTS, Manages, Donates, Stores, Fulfills, Processes)</span>
        </div>
        <div class="legend-item">
            <div class="legend-symbol" style="background: #fff9c4; border: 1.5px solid #f57c00; border-radius: 50%;"></div>
            <span><strong>Ovals (Single)</strong> - Single-valued Attributes</span>
        </div>
        <div class="legend-item">
            <div style="width: 60px; height: 30px; margin-right: 10px; background: #fff9c4; border: 3px double #f57c00; border-radius: 50%;"></div>
            <span><strong>Ovals (Double)</strong> - Multi-valued Attributes (selected_hospitals)</span>
        </div>
        <div class="legend-item">
            <span style="text-decoration: underline; font-weight: bold; margin-right: 10px;">Underlined</span>
            <span><strong>Primary Keys</strong> - Unique identifiers</span>
        </div>
        <div class="legend-item">
            <span style="font-weight: bold; color: #d84315; margin-right: 10px;">1, N</span>
            <span><strong>Cardinality</strong> - 1 = One, N = Many</span>
        </div>
    </div>

    <div class="legend" style="margin-top: 20px;">
        <h3>ðŸ“‹ Key Design Improvements</h3>
        <ul>
            <li><strong>REQUESTS as Relationship:</strong> Now shown as diamond (not entity) connecting REQUESTERS to HOSPITALS</li>
            <li><strong>Request Attributes:</strong> patient_name, blood_type, urgency, units_needed, etc. are attributes of the REQUESTS relationship</li>
            <li><strong>Multi-valued Attribute:</strong> selected_hospitals shown with double oval (multiple hospitals can be selected per request)</li>
            <li><strong>Cleaner Design:</strong> Removed unnecessary attributes to focus on essential information</li>
            <li><strong>No Foreign Keys:</strong> Foreign keys not shown in ER diagram (only in relational schema)</li>
            <li><strong>Proper ER Notation:</strong> Relationships as diamonds, entities as rectangles, attributes as ovals</li>
        </ul>
    </div>

    <div class="legend" style="margin-top: 20px;">
        <h3>ðŸ”— Relationships Summary</h3>
        <ul>
            <li><strong>REQUESTS:</strong> REQUESTERS request blood from HOSPITALS (1:N) - with patient details as attributes</li>
            <li><strong>Manages:</strong> HOSPITALS manage DONORS (1:N)</li>
            <li><strong>Donates:</strong> DONORS donate to create DONATIONS (1:N)</li>
            <li><strong>Stores:</strong> HOSPITALS store DONATIONS (1:N)</li>
            <li><strong>Fulfills:</strong> REQUESTS fulfilled by TRANSFERS (1:N)</li>
            <li><strong>Processes:</strong> HOSPITALS process TRANSFERS (1:N)</li>
        </ul>
    </div>
</body>
</html>